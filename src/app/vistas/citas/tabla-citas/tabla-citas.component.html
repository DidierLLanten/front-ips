<div class="row filtro">
  <div>
    <input
      type="text"
      pInputText
      placeholder="Buscar por medico"
      [(ngModel)]="nombreMedico"
    />
    <button
      type="button"
      pButton
      label="Buscar"
      icon="pi pi-search"
      (click)="buscarMedico()"
    ></button>
  </div>
</div>

<div class="card">
  <p-toast></p-toast>
  <p-table [value]="citas" [tableStyle]="{ 'min-width': '50rem' }" [rows]="10" [paginator]="true"
  [rowsPerPageOptions]="[10, 25, 50]">
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 5rem">Agenda</th>
        <th>Disponibilidad</th>
        <th>Nombre Medico</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-cita>
      <tr>
        <td>
          <button
            type="button"
            pButton
            pRipple
            icon="pi pi-plus"
            class="boton-agendar"
            (click)="showDialog(cita)"
          ></button>
        </td>
        <td>{{ cita.fecha | date: 'dd/MM/YYYY HH:mm'}}</td>
        <td>{{ cita.medico.persona.nombre }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-dialog
  header="Header"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '40rw', height: 'auto' }"
  [draggable]="false"
  [resizable]="false"
>
  <ng-template pTemplate="header">
    <div class="header-dialog">
      <span class="text-xl font-bold">Confirmación de cita</span>
    </div>
  </ng-template>
  <div class="titulo">
    <p>¿Está seguro que desea agendar esta cita?</p>
  </div>
  <br />
  <p *ngIf="visible">
    Sr(a). <strong>{{ paciente.persona.nombre | uppercase }}</strong> su cita será
    asiganda para el dia <strong>{{ citaSeleccionada.fecha | date: 'dd/MM/YYYY HH:mm' }}</strong> con el
    Dr(a). <strong>{{ citaSeleccionada.medico.persona.nombre | uppercase }}</strong
    >.
  </p>
  <div class="botones">
    <p-button
      label="Confirmar"
      icon="pi pi-check"
      class="boton-confirmar"
      styleClass="p-button-success"
      (onClick)="confirmarCita()"
    ></p-button>

    <p-button
      label="Cancelar"
      icon="pi pi-times"
      styleClass="p-button-danger"
      (click)="visible = false"
    ></p-button>
  </div>
</p-dialog>
